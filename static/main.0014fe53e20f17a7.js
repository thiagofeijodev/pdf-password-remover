(()=>{"use strict";var e,r,o,t,s={1242(e,r,o){var t=o(3712),s=o(538),a=o(8780),l=o(6988);o(4979),o(4423),o(8140),o(5044),o(1903),o(1134),o(8845),o(373);let c=async e=>(function(e){try{return e.slice(0)}catch(t){console.warn("copyArrayBuffer slice failed, using fallback copy",t);let r=new Uint8Array(e),o=new Uint8Array(r.length);return o.set(r),o.buffer}})(await e.arrayBuffer()),i="pdfPasswordRemover_data";o(4114),o(6280);var n=o(1915);let d=null,u=async()=>{if(d)return d;try{console.log("[PDFium] Initializing pdfium.wasm...");let e=await fetch("https://feijo.dev/pdf-password-remover/pdfium.wasm"),r=await e.arrayBuffer();return(d=await (0,n.T)({wasmBinary:r})).PDFiumExt_Init(),console.log("[PDFium] ✓ pdfium.wasm initialized"),d}catch(e){throw console.error("[PDFium] ✗ Failed to initialize pdfium:",e),e}},p=async(e,r)=>{let o=await u();try{console.log("[PDFium] Attempting direct PDF decryption..."),console.log(`[PDFium] PDF size: ${e.byteLength} bytes`);let t=e.byteLength,s=o.pdfium.wasmExports.malloc(t);new Uint8Array(o.pdfium.wasmExports.memory.buffer,s,t).set(new Uint8Array(e));let a=r||0;try{let r=o.FPDF_LoadMemDocument(s,t,a);if(!r){let r=o.FPDF_GetLastError();if(console.log(`[PDFium] Error code: ${r}`),4===r)throw Error("Password required or incorrect password");if(0===r||1===r)return o.pdfium.wasmExports.free(s),a&&o.pdfium.wasmExports.free(a),new Blob([e],{type:"application/pdf"});throw Error(`Failed to load PDF: error code ${r}`)}console.log("[PDFium] ✓ PDF loaded");let l=o.FPDF_GetPageCount(r);if(console.log(`[PDFium] ✓ PDF has ${l} pages`),l<=0)throw Error("Invalid PDF or unable to access pages");let c=[],i=o.pdfium.wasmExports.malloc(8),n=new DataView(o.pdfium.wasmExports.memory.buffer);n.setInt32(i,1,!0);let d=o.pdfium.addFunction((e,r,t)=>{try{let e=new Uint8Array(o.pdfium.wasmExports.memory.buffer,r,t);return c.push(new Uint8Array(e)),1}catch(e){return console.error("[PDFium] Error in WriteBlock callback:",e),0}},"iiii");if(n.setInt32(i+4,d,!0),console.log("[PDFium] Calling FPDF_SaveAsCopy..."),!o.FPDF_SaveAsCopy(r,i,3))throw console.error("[PDFium] ✗ Failed to save PDF"),o.pdfium.removeFunction(d),o.pdfium.wasmExports.free(i),o.FPDF_CloseDocument(r),Error("Failed to save PDF copy");console.log(`[PDFium] ✓ PDF saved successfully (${c.length} chunks)`);let u=c.reduce((e,r)=>e+r.length,0),p=new Uint8Array(u),m=0;for(let e of c)p.set(e,m),m+=e.length;console.log(`[PDFium] ✓ Combined PDF data: ${p.length} bytes`),o.pdfium.removeFunction(d),o.pdfium.wasmExports.free(i),o.FPDF_CloseDocument(r),console.log("[PDFium] ✓ PDF decrypted successfully"),console.log("[PDFium] savedPdfData type:",p.constructor.name),console.log("[PDFium] savedPdfData length:",p.length);let f=new Blob([p],{type:"application/pdf"});return console.log("[PDFium] Created blob:",f),console.log("[PDFium] Blob size:",f.size),console.log("[PDFium] Blob type:",f.type),f}finally{o.pdfium.wasmExports.free(s),a&&o.pdfium.wasmExports.free(a)}}catch(e){throw console.error("[PDFium] Direct decryption error:",e.message),e}},m=o.p+"images/7d99c485a2ac870cf4dd4fbd4a6d8285-logo.png",f=document.getElementById("root");(0,s.createRoot)(f).render((0,t.jsx)(()=>{let{processPDFWithPdfium:e}=(()=>{let[e,r]=(0,a.useState)(!0);return(0,a.useEffect)(()=>{r(!1)},[]),{isLoading:e,processPDFWithPdfium:async(e,r)=>{try{let o;console.log("[Hook] Starting PDF processing with pdfium.wasm"),console.log("[Hook] PDF size:",e.byteLength,"bytes"),console.log("[Hook] Password length:",r.length,"characters");try{console.log("[Hook] Attempting direct decryption..."),o=await p(e,r),console.log("[Hook] ✓ Direct decryption succeeded")}catch(e){console.warn("[Hook] Direct decryption failed:",e.message)}return console.log("[Hook] Output size:",o.size,"bytes"),o}catch(e){throw console.error("[Hook] PDF processing error:",e),e}},isPdfiumAvailable:!e}})(),{password:r,isProcessing:o,error:s,fileName:n,file:d,savePassword:u,handleFileChange:f,handlePasswordChange:h,handleSavePasswordChange:b,handleRemovePassword:g}=(e=>{let[r,o]=(0,a.useState)(null),[t,s]=(0,a.useState)(""),[l,n]=(0,a.useState)(!1),[d,u]=(0,a.useState)(""),[p,m]=(0,a.useState)(""),[f,h]=(0,a.useState)(!0);(0,a.useEffect)(()=>{try{let e=localStorage.getItem(i);if(e){let{password:r}=JSON.parse(e);if(r)try{let e=atob(r);s(e)}catch(e){console.warn("Failed to decode saved password:",e)}}}catch(e){console.warn("Failed to load from localStorage:",e)}},[]);let b=async()=>{if(!r)return void u("Please select a PDF file");if(!t)return void u("Please enter the PDF password");n(!0),u("");try{var o;let s,a,l,i=await c(r,t);o=await e(i,t),s=URL.createObjectURL(o),(a=document.createElement("a")).href=s,l=p.replace(/\.pdf$/i,""),a.download=`${l}_unlocked.pdf`,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(s),n(!1)}catch(e){n(!1),e.message.includes("password")||e.message.includes("PasswordException")?u("Incorrect password. Please try again."):u("Error processing PDF: "+e.message)}};return{file:r,password:t,isProcessing:l,error:d,fileName:p,savePassword:f,handleFileChange:e=>{let r=e.target.files[0];r&&(o(r),m(r.name),u(""))},handlePasswordChange:e=>{let r=e.target.value;s(r),u("");try{if(f){let e=btoa(r);localStorage.setItem(i,JSON.stringify({password:e}))}else localStorage.setItem(i,JSON.stringify({password:""}))}catch(e){console.warn("Failed to save password to localStorage:",e)}},handleSavePasswordChange:e=>{let r=e.target.checked;h(r);try{r||(s(""),localStorage.setItem(i,JSON.stringify({password:""})))}catch(e){console.warn("Failed to update localStorage:",e)}},handleRemovePassword:b}})(e);return(0,a.useEffect)(()=>{},[]),(0,t.jsx)("div",{className:l.container,children:(0,t.jsxs)("div",{className:l.card,children:[(0,t.jsx)("img",{src:m,alt:"PDF Password Remover Logo",className:l.logo}),(0,t.jsx)("h1",{className:l.title,children:"PDF Password Remover"}),(0,t.jsx)("p",{className:l.subtitle,children:"Upload a password-protected PDF and remove its password protection"}),(0,t.jsxs)("div",{className:l.form,children:[(0,t.jsxs)("div",{className:l.inputGroup,children:[(0,t.jsx)("label",{htmlFor:"pdf-input",className:l.label,children:"Select PDF File"}),(0,t.jsx)("input",{id:"pdf-input",type:"file",accept:".pdf,application/pdf",onChange:f,className:l.fileInput,disabled:o}),n&&(0,t.jsx)("div",{className:l.fileName,children:(0,t.jsxs)("span",{children:["Selected: ",n]})})]}),(0,t.jsxs)("div",{className:l.inputGroup,children:[(0,t.jsx)("label",{htmlFor:"password-input",className:l.label,children:"PDF Password"}),(0,t.jsx)("input",{id:"password-input",type:"password",value:r,onChange:h,placeholder:"Enter the PDF password",className:l.passwordInput,disabled:o,onKeyDown:e=>{"Enter"===e.key&&g()}}),(0,t.jsxs)("div",{className:l.checkboxGroup,children:[(0,t.jsx)("input",{id:"save-password-checkbox",type:"checkbox",checked:u,onChange:b,className:l.checkbox,disabled:o}),(0,t.jsx)("label",{htmlFor:"save-password-checkbox",className:l.checkboxLabel,children:"Save password for next time"})]})]}),s&&(0,t.jsx)("div",{className:l.error,children:s}),(0,t.jsx)("button",{onClick:g,disabled:o||!d||!r,className:l.button,children:o?"Processing...":"Remove Password & Download"})]}),(0,t.jsxs)("div",{className:l.info,children:[(0,t.jsx)("p",{children:"\uD83D\uDD12 All processing is done in your browser"}),(0,t.jsx)("p",{children:"\uD83D\uDCC1 Your files never leave your device"}),(0,t.jsx)("p",{children:"⚙️ Built with WebAssembly & PDFium"})]})]})})},{})),"serviceWorker"in navigator&&navigator.serviceWorker.register("service-worker.js")},6988(e,r,o){e.exports={container:"_83e95e8b324c7cd1-container",card:"_83e95e8b324c7cd1-card",fadeIn:"_83e95e8b324c7cd1-fadeIn",logo:"_83e95e8b324c7cd1-logo",title:"_83e95e8b324c7cd1-title",subtitle:"_83e95e8b324c7cd1-subtitle",form:"_83e95e8b324c7cd1-form",inputGroup:"_83e95e8b324c7cd1-inputGroup",label:"_83e95e8b324c7cd1-label",fileInput:"_83e95e8b324c7cd1-fileInput",fileName:"_83e95e8b324c7cd1-fileName",passwordInput:"_83e95e8b324c7cd1-passwordInput",checkboxGroup:"_83e95e8b324c7cd1-checkboxGroup",checkbox:"_83e95e8b324c7cd1-checkbox",checkboxLabel:"_83e95e8b324c7cd1-checkboxLabel",error:"_83e95e8b324c7cd1-error",button:"_83e95e8b324c7cd1-button",info:"_83e95e8b324c7cd1-info"}}},a={};function l(e){var r=a[e];if(void 0!==r)return r.exports;var o=a[e]={exports:{}};return s[e].call(o.exports,o,o.exports,l),o.exports}l.m=s,l.n=e=>{var r=e&&e.__esModule?()=>e.default:()=>e;return l.d(r,{a:r}),r},l.d=(e,r)=>{for(var o in r)l.o(r,o)&&!l.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:r[o]})},l.k=e=>""+e+".css",l.g=(()=>{if("object"==typeof globalThis)return globalThis;try{return this||Function("return this")()}catch(e){if("object"==typeof window)return window}})(),l.o=(e,r)=>Object.prototype.hasOwnProperty.call(e,r),l.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},e=[],l.O=(r,o,t,s)=>{if(o){s=s||0;for(var a=e.length;a>0&&e[a-1][2]>s;a--)e[a]=e[a-1];e[a]=[o,t,s];return}for(var c=1/0,a=0;a<e.length;a++){for(var[o,t,s]=e[a],i=!0,n=0;n<o.length;n++)(!1&s||c>=s)&&Object.keys(l.O).every(e=>l.O[e](o[n]))?o.splice(n--,1):(i=!1,s<c&&(c=s));if(i){e.splice(a--,1);var d=t();void 0!==d&&(r=d)}}return r},l.p="/pdf-password-remover",l.rv=()=>"1.6.6",l.b=document.baseURI||self.location.href,r={889:0},l.O.j=e=>0===r[e],o=(e,o)=>{var t,s,[a,c,i]=o,n=0;if(a.some(e=>0!==r[e])){for(t in c)l.o(c,t)&&(l.m[t]=c[t]);if(i)var d=i(l)}for(e&&e(o);n<a.length;n++)s=a[n],l.o(r,s)&&r[s]&&r[s][0](),r[s]=0;return l.O(d)},(t=self.webpackChunkpdf_password_remover=self.webpackChunkpdf_password_remover||[]).forEach(o.bind(null,0)),t.push=o.bind(null,t.push.bind(t)),l.ruid="bundler=rspack@1.6.6";var c=l.O(void 0,["258"],()=>l(1242));c=l.O(c)})();