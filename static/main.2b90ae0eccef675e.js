(()=>{"use strict";var e,r,o,t,a={1242(e,r,o){var t=o(3712),a=o(538),s=o(8780),c=o(6988);o(4979),o(4423),o(8140),o(5044),o(1903),o(1134),o(8845),o(373);let l=async e=>(function(e){try{return e.slice(0)}catch(t){console.warn("copyArrayBuffer slice failed, using fallback copy",t);let r=new Uint8Array(e),o=new Uint8Array(r.length);return o.set(r),o.buffer}})(await e.arrayBuffer()),n="pdfPasswordRemover_data";o(4114),o(6280);var i=o(1915);let d=null,p=async()=>{if(d)return d;try{let e=await fetch("https://feijo.dev/pdf-password-remover/pdfium.wasm"),r=await e.arrayBuffer();return(d=await (0,i.T)({wasmBinary:r})).PDFiumExt_Init(),d}catch(e){throw console.error("[PDFium] Failed to initialize:",e),e}},u=async(e,r)=>{let o=await p(),t=o.pdfium.wasmExports,a=o.pdfium.wasmExports.memory.buffer,s=e.byteLength,c=t.malloc(s);new Uint8Array(a,c,s).set(new Uint8Array(e));try{let l=o.FPDF_LoadMemDocument(c,s,r||0);if(!l){let r=o.FPDF_GetLastError();if(4===r)throw Error("Password required or incorrect password");if(0===r||1===r)return new Blob([e],{type:"application/pdf"});throw Error(`Failed to load PDF: error code ${r}`)}if(0>=o.FPDF_GetPageCount(l))throw Error("Invalid PDF or unable to access pages");let n=[],i=t.malloc(8),d=new DataView(a);d.setInt32(i,1,!0);let p=o.pdfium.addFunction((e,r,o)=>{try{let e=new Uint8Array(a,r,o);return n.push(new Uint8Array(e)),1}catch(e){return console.error("[PDFium] WriteBlock error:",e),0}},"iiii");if(d.setInt32(i+4,p,!0),!o.FPDF_SaveAsCopy(l,i,3))throw Error("Failed to save PDF copy");let u=n.reduce((e,r)=>e+r.length,0),f=new Uint8Array(u),h=0;for(let e of n)f.set(e,h),h+=e.length;return o.pdfium.removeFunction(p),t.free(i),o.FPDF_CloseDocument(l),new Blob([f],{type:"application/pdf"})}catch(e){throw console.error("[PDFium] Decryption error:",e.message),e}finally{t.free(c)}},f=o.p+"7d99c485a2ac870cf4dd4fbd4a6d8285.png",h=document.getElementById("root");(0,a.createRoot)(h).render((0,t.jsx)(()=>{let{processPDFWithPdfium:e}=(()=>{let[e,r]=(0,s.useState)(!0);return(0,s.useEffect)(()=>{r(!1)},[]),{isLoading:e,processPDFWithPdfium:async(e,r)=>{try{let o;console.log("[Hook] Starting PDF processing with pdfium.wasm"),console.log("[Hook] PDF size:",e.byteLength,"bytes"),console.log("[Hook] Password length:",r.length,"characters");try{console.log("[Hook] Attempting direct decryption..."),o=await u(e,r),console.log("[Hook] ✓ Direct decryption succeeded")}catch(e){console.warn("[Hook] Direct decryption failed:",e.message)}return console.log("[Hook] Output size:",o.size,"bytes"),o}catch(e){throw console.error("[Hook] PDF processing error:",e),e}},isPdfiumAvailable:!e}})(),{password:r,isProcessing:o,error:a,fileName:i,file:d,savePassword:p,handleFileChange:h,handlePasswordChange:b,handleSavePasswordChange:m,handleRemovePassword:w}=(e=>{let[r,o]=(0,s.useState)(null),[t,a]=(0,s.useState)(""),[c,i]=(0,s.useState)(!1),[d,p]=(0,s.useState)(""),[u,f]=(0,s.useState)(""),[h,b]=(0,s.useState)(!0);(0,s.useEffect)(()=>{try{let e=localStorage.getItem(n);if(e){let{password:r}=JSON.parse(e);if(r)try{let e=atob(r);a(e)}catch(e){console.warn("Failed to decode saved password:",e)}}}catch(e){console.warn("Failed to load from localStorage:",e)}},[]);let m=async()=>{if(!r)return void p("Please select a PDF file");if(!t)return void p("Please enter the PDF password");i(!0),p("");try{var o;let a,s,c,n=await l(r,t);o=await e(n,t),a=URL.createObjectURL(o),(s=document.createElement("a")).href=a,c=u.replace(/\.pdf$/i,""),s.download=`${c}_unlocked.pdf`,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(a),i(!1)}catch(e){i(!1),e.message.includes("password")||e.message.includes("PasswordException")?p("Incorrect password. Please try again."):p("Error processing PDF: "+e.message)}};return{file:r,password:t,isProcessing:c,error:d,fileName:u,savePassword:h,handleFileChange:e=>{let r=e.target.files[0];r&&(o(r),f(r.name),p(""))},handlePasswordChange:e=>{let r=e.target.value;a(r),p("");try{if(h){let e=btoa(r);localStorage.setItem(n,JSON.stringify({password:e}))}else localStorage.setItem(n,JSON.stringify({password:""}))}catch(e){console.warn("Failed to save password to localStorage:",e)}},handleSavePasswordChange:e=>{let r=e.target.checked;b(r);try{r||(a(""),localStorage.setItem(n,JSON.stringify({password:""})))}catch(e){console.warn("Failed to update localStorage:",e)}},handleRemovePassword:m}})(e);return(0,s.useEffect)(()=>{},[]),(0,t.jsxs)("div",{className:c.container,children:[(0,t.jsxs)("div",{className:c.card,children:[(0,t.jsx)("img",{src:f,alt:"PDF Password Remover Logo",className:c.logo}),(0,t.jsx)("h1",{className:c.title,children:"PDF Password Remover"}),(0,t.jsx)("p",{className:c.subtitle,children:"Upload a password-protected PDF and remove its password protection"}),(0,t.jsxs)("div",{className:c.form,children:[(0,t.jsxs)("div",{className:c.inputGroup,children:[(0,t.jsx)("label",{htmlFor:"pdf-input",className:c.label,children:"Select PDF File"}),(0,t.jsx)("input",{id:"pdf-input",type:"file",accept:".pdf,application/pdf",onChange:h,className:c.fileInput,disabled:o}),i&&(0,t.jsx)("div",{className:c.fileName,children:(0,t.jsxs)("span",{children:["Selected: ",i]})})]}),(0,t.jsxs)("div",{className:c.inputGroup,children:[(0,t.jsx)("label",{htmlFor:"password-input",className:c.label,children:"PDF Password"}),(0,t.jsx)("input",{id:"password-input",type:"password",value:r,onChange:b,placeholder:"Enter the PDF password",className:c.passwordInput,disabled:o,onKeyDown:e=>{"Enter"===e.key&&w()}}),(0,t.jsxs)("div",{className:c.checkboxGroup,children:[(0,t.jsx)("input",{id:"save-password-checkbox",type:"checkbox",checked:p,onChange:m,className:c.checkbox,disabled:o}),(0,t.jsx)("label",{htmlFor:"save-password-checkbox",className:c.checkboxLabel,children:"Save password for next time"})]})]}),a&&(0,t.jsx)("div",{className:c.error,children:a}),(0,t.jsx)("button",{onClick:w,disabled:o||!d||!r,className:c.button,children:o?"Processing...":"Remove Password & Download"})]}),(0,t.jsxs)("div",{className:c.info,children:[(0,t.jsx)("p",{children:"\uD83D\uDD12 All processing is done in your browser"}),(0,t.jsx)("p",{children:"\uD83D\uDCC1 Your files never leave your device"}),(0,t.jsx)("p",{children:"⚙️ Built with WebAssembly & PDFium"})]})]}),(0,t.jsxs)("footer",{className:c.footer,children:["developed by"," ",(0,t.jsx)("a",{href:"https://feijo.dev",target:"_blank",rel:"noopener noreferrer",children:"feijo.dev"})]})]})},{})),"serviceWorker"in navigator&&navigator.serviceWorker.register("service-worker.js")},6988(e,r,o){e.exports={container:"_83e95e8b324c7cd1-container",card:"_83e95e8b324c7cd1-card",fadeIn:"_83e95e8b324c7cd1-fadeIn",logo:"_83e95e8b324c7cd1-logo",title:"_83e95e8b324c7cd1-title",subtitle:"_83e95e8b324c7cd1-subtitle",form:"_83e95e8b324c7cd1-form",inputGroup:"_83e95e8b324c7cd1-inputGroup",label:"_83e95e8b324c7cd1-label",fileInput:"_83e95e8b324c7cd1-fileInput",fileName:"_83e95e8b324c7cd1-fileName",passwordInput:"_83e95e8b324c7cd1-passwordInput",checkboxGroup:"_83e95e8b324c7cd1-checkboxGroup",checkbox:"_83e95e8b324c7cd1-checkbox",checkboxLabel:"_83e95e8b324c7cd1-checkboxLabel",error:"_83e95e8b324c7cd1-error",button:"_83e95e8b324c7cd1-button",info:"_83e95e8b324c7cd1-info",footer:"_83e95e8b324c7cd1-footer"}}},s={};function c(e){var r=s[e];if(void 0!==r)return r.exports;var o=s[e]={exports:{}};return a[e].call(o.exports,o,o.exports,c),o.exports}c.m=a,c.n=e=>{var r=e&&e.__esModule?()=>e.default:()=>e;return c.d(r,{a:r}),r},c.d=(e,r)=>{for(var o in r)c.o(r,o)&&!c.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:r[o]})},c.k=e=>""+e+".css",c.g=(()=>{if("object"==typeof globalThis)return globalThis;try{return this||Function("return this")()}catch(e){if("object"==typeof window)return window}})(),c.o=(e,r)=>Object.prototype.hasOwnProperty.call(e,r),c.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},e=[],c.O=(r,o,t,a)=>{if(o){a=a||0;for(var s=e.length;s>0&&e[s-1][2]>a;s--)e[s]=e[s-1];e[s]=[o,t,a];return}for(var l=1/0,s=0;s<e.length;s++){for(var[o,t,a]=e[s],n=!0,i=0;i<o.length;i++)(!1&a||l>=a)&&Object.keys(c.O).every(e=>c.O[e](o[i]))?o.splice(i--,1):(n=!1,a<l&&(l=a));if(n){e.splice(s--,1);var d=t();void 0!==d&&(r=d)}}return r},c.p="/pdf-password-remover/",c.rv=()=>"1.6.6",c.b=document.baseURI||self.location.href,r={889:0},c.O.j=e=>0===r[e],o=(e,o)=>{var t,a,[s,l,n]=o,i=0;if(s.some(e=>0!==r[e])){for(t in l)c.o(l,t)&&(c.m[t]=l[t]);if(n)var d=n(c)}for(e&&e(o);i<s.length;i++)a=s[i],c.o(r,a)&&r[a]&&r[a][0](),r[a]=0;return c.O(d)},(t=self.webpackChunkpdf_password_remover=self.webpackChunkpdf_password_remover||[]).forEach(o.bind(null,0)),t.push=o.bind(null,t.push.bind(t)),c.ruid="bundler=rspack@1.6.6";var l=c.O(void 0,["258"],()=>c(1242));l=c.O(l)})();